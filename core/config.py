from __future__ import annotations

"""
üîß –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã:
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ª–∏–º–∏—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–î–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∏–∂–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env —Ñ–∞–π–ª.
"""

from functools import lru_cache
from typing import List, Dict

from pydantic import Field, field_validator
from pydantic_settings import BaseSettings, SettingsConfigDict


class Settings(BaseSettings):
    """
    –ï–¥–∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ .env —Ñ–∞–π–ª–∞.
    """

    # =====================================
    # üì± TELEGRAM API
    # =====================================

    # –î–∞–Ω–Ω—ã–µ –¥–ª—è Telegram API (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://my.telegram.org)
    TELEGRAM_API_ID: str | None = Field(
        None, description="ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤)"
    )
    TELEGRAM_API_HASH: str | None = Field(
        None,
        description="Hash –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤)",
    )
    TELEGRAM_PHONE: str | None = Field(
        None, description="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Telegram (+7XXXXXXXXXX)"
    )

    # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)
    TELEGRAM_BOT_TOKEN: str = Field(
        ..., description="–¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)"
    )

    # =====================================
    # üì∫ –ú–û–ù–ò–¢–û–†–ò–ù–ì –ö–ê–ù–ê–õ–û–í
    # =====================================

    # –ö–∞–Ω–∞–ª—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
    TELEGRAM_CHANNEL_IDS: str = Field(
        "meduzalive,lentach,rbc_news",
        description="–°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (username –∏–ª–∏ ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)",
    )

    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–µ–∫—É–Ω–¥—ã)
    CHECK_INTERVAL_SECONDS: int = Field(
        30,
        ge=10,
        le=3600,
        description="–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–∞—Ö (10-3600 —Å–µ–∫, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 30-300)",
    )

    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (—Å–µ–∫—É–Ω–¥—ã)
    ERROR_RETRY_SECONDS: int = Field(
        300,
        ge=60,
        le=3600,
        description="–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (60-3600 —Å–µ–∫)",
    )

    # –õ–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ Telethon
    TELETHON_MESSAGE_LIMIT: int = Field(
        100,
        ge=1,
        le=500,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å",
    )

    # =====================================
    # ü§ñ LLM –ù–ê–°–¢–†–û–ô–ö–ò
    # =====================================

    # URL —Å–µ—Ä–≤–µ—Ä–∞ Ollama
    OLLAMA_BASE_URL: str = Field(
        "http://localhost:11434", description="URL —Å–µ—Ä–≤–µ—Ä–∞ Ollama –¥–ª—è LLM –∞–Ω–∞–ª–∏–∑–∞"
    )

    # –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    OLLAMA_MODEL: str = Field(
        "ilyagusev/saiga_llama3",
        description="–ù–∞–∑–≤–∞–Ω–∏–µ LLM –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ilyagusev/saiga_llama3, llama3.2, gemma2)",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (—Å–∏–º–≤–æ–ª—ã)
    MAX_TEXT_LENGTH_FOR_ANALYSIS: int = Field(
        9000,
        ge=500,
        le=10000,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ LLM (—Å–∏–º–≤–æ–ª—ã)",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è (—Å–∏–º–≤–æ–ª—ã)
    MAX_SUMMARY_LENGTH: int = Field(
        700,
        ge=100,
        le=2000,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ (—Å–∏–º–≤–æ–ª—ã)",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–µ—à—Ç–µ–≥–æ–≤ –≤ –∞–Ω–∞–ª–∏–∑–µ
    MAX_HASHTAGS_IN_ANALYSIS: int = Field(
        5, ge=1, le=20, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–µ—à—Ç–µ–≥–æ–≤ –≤ –∞–Ω–∞–ª–∏–∑–µ –Ω–æ–≤–æ—Å—Ç–∏"
    )

    # =====================================
    # üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•
    # =====================================

    # –î–≤–∏–∂–æ–∫ –ë–î (—Ç–æ–ª—å–∫–æ PostgreSQL)
    DB_ENGINE: str = Field(
        "postgres", description="–î–≤–∏–∂–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ postgres –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)"
    )

    # –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
    POSTGRES_DSN: str = Field(
        "postgresql://postgres:postgres@localhost:5432/news_analyzer",
        description="–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (postgresql://–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:–ø–∞—Ä–æ–ª—å@—Ö–æ—Å—Ç:–ø–æ—Ä—Ç/–±–∞–∑–∞)",
    )

    # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    POSTGRES_POOL_MIN_SIZE: int = Field(
        2, ge=1, le=50, description="–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –ë–î"
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
    POSTGRES_POOL_MAX_SIZE: int = Field(
        10, ge=1, le=100, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –ë–î"
    )

    # =====================================
    # üîç –í–ï–ë-–ü–û–ò–°–ö
    # =====================================

    # API –∫–ª—é—á –¥–ª—è Tavily (–ø–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ)
    TAVILY_API_KEY: str | None = Field(
        None,
        description="API –∫–ª—é—á –¥–ª—è Tavily –≤–µ–±-–ø–æ–∏—Å–∫–∞ (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://tavily.com/)",
    )

    # =====================================
    # ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –õ–ò–ú–ò–¢–´
    # =====================================

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM
    MAX_CONCURRENT_REQUESTS: int = Field(
        2,
        ge=1,
        le=20,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM",
    )

    # –†–∞–∑–º–µ—Ä –∫—ç—à–∞ –¥–ª—è LLM –∞–Ω–∞–ª–∏–∑–æ–≤
    DEFAULT_CACHE_SIZE: int = Field(
        1000,
        ge=100,
        le=10000,
        description="–†–∞–∑–º–µ—Ä –∫—ç—à–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ LLM –∞–Ω–∞–ª–∏–∑–æ–≤",
    )

    # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (—Å–µ–∫—É–Ω–¥—ã)
    DEFAULT_CACHE_TTL_SECONDS: int = Field(
        3600,
        ge=300,
        le=86400,
        description="–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–ø–∏—Å–µ–π –≤ –∫—ç—à–µ (—Å–µ–∫—É–Ω–¥—ã, 1 —á–∞—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram
    MAX_MESSAGE_LENGTH: int = Field(
        8192, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram (–ª–∏–º–∏—Ç API)"
    )

    # =====================================
    # üîÑ RETRY –ò –¢–ê–ô–ú–ê–£–¢–´
    # =====================================

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    DEFAULT_MAX_RETRY_ATTEMPTS: int = Field(
        3, ge=1, le=10, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö"
    )

    # –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
    DEFAULT_RETRY_BASE_DELAY: float = Field(
        1.0, ge=0.1, le=60.0, description="–ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)"
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
    DEFAULT_RETRY_MAX_DELAY: float = Field(
        60.0,
        ge=1.0,
        le=600.0,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)",
    )

    # –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è –∑–∞–¥–µ—Ä–∂–∫–∏
    DEFAULT_RETRY_EXPONENTIAL_BASE: float = Field(
        2.0,
        ge=1.1,
        le=10.0,
        description="–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏",
    )

    # –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–µ–∫—É–Ω–¥—ã)
    DEFAULT_BATCH_TIMEOUT_SECONDS: int = Field(
        10, ge=1, le=300, description="–¢–∞–π–º–∞—É—Ç –¥–ª—è –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–µ–∫—É–Ω–¥—ã)"
    )

    # –¢–∞–π–º–∞—É—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
    DEFAULT_REQUEST_TIMEOUT_SECONDS: int = Field(
        30, ge=5, le=300, description="–¢–∞–π–º–∞—É—Ç –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)"
    )

    # =====================================
    # üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê
    # =====================================

    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (–º–∏–Ω—É—Ç—ã)
    HEALTH_CHECK_INTERVAL_MINUTES: int = Field(
        10, ge=1, le=60, description="–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (–º–∏–Ω—É—Ç—ã)"
    )

    # –ü–æ—Ä–æ–≥ –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–µ–∫—É–Ω–¥—ã)
    SLOW_OPERATION_THRESHOLD_SECONDS: float = Field(
        5.0,
        ge=0.1,
        le=60.0,
        description="–ü–æ—Ä–æ–≥ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–µ–∫—É–Ω–¥—ã)",
    )

    # –õ–∏–º–∏—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    PERFORMANCE_METRICS_LIMIT: int = Field(
        1000,
        ge=100,
        le=10000,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ –ø–∞–º—è—Ç–∏",
    )

    # –ü–æ—Ä–æ–≥–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø—Ä–æ—Ü–µ–Ω—Ç—ã)
    MEMORY_WARNING_THRESHOLD_PERCENT: float = Field(
        80.0,
        ge=50.0,
        le=95.0,
        description="–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞–º—è—Ç–∏ (%)",
    )
    CPU_WARNING_THRESHOLD_PERCENT: float = Field(
        85.0,
        ge=50.0,
        le=95.0,
        description="–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ CPU (%)",
    )
    DISK_WARNING_THRESHOLD_PERCENT: float = Field(
        90.0,
        ge=50.0,
        le=95.0,
        description="–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–∏—Å–∫–∞ (%)",
    )

    # =====================================
    # üì¢ –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
    # =====================================

    # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å–µ–∫—É–Ω–¥—ã)
    NOTIFICATION_RATE_LIMIT_DELAY: float = Field(
        0.05,
        ge=0.01,
        le=1.0,
        description="–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è rate limit",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    MAX_POPULAR_HASHTAGS_DISPLAY: int = Field(
        10,
        ge=5,
        le=50,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    MAX_ERROR_HISTORY_PER_CATEGORY: int = Field(
        10,
        ge=5,
        le=100,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    )

    # =====================================
    # üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò –û–¢–ß–ï–¢–´
    # =====================================

    # –õ–∏–º–∏—Ç —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    STATISTICS_HASHTAGS_LIMIT: int = Field(
        1000,
        ge=100,
        le=10000,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
    )

    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    TOP_CHANNELS_LIMIT: int = Field(
        5,
        ge=3,
        le=20,
        description="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ",
    )

    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    DAILY_STATS_HISTORY_DAYS: int = Field(
        7,
        ge=1,
        le=365,
        description="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
    )

    # =====================================
    # üé® –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ò –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï
    # =====================================

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    MAX_CHANNEL_TITLE_DISPLAY: int = Field(
        30,
        ge=10,
        le=100,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    MAX_SUMMARY_DISPLAY_LENGTH: int = Field(
        1000,
        ge=100,
        le=1000,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è",
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø–µ
    MAX_GROUP_NOTIFICATIONS: int = Field(
        10,
        ge=1,
        le=10,
        description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ",
    )

    # =====================================
    # üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
    # =====================================

    # –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    LOG_FORMAT: str = Field(
        "%(asctime)s - %(levelname)s - %(message)s",
        description="–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–µ–π –≤ –ª–æ–≥–∞—Ö",
    )

    # –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤ –ª–æ–≥–∞—Ö
    LOG_DATE_FORMAT: str = Field(
        "%Y-%m-%d %H:%M:%S", description="–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ª–æ–≥–∞—Ö"
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞ (–ú–ë)
    MAX_LOG_FILE_SIZE_MB: int = Field(
        10, ge=1, le=100, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ª–æ–≥–∞ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö"
    )

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
    MAX_LOG_FILES_COUNT: int = Field(
        3, ge=1, le=20, description="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏"
    )

    # =====================================
    # üé≠ –≠–ú–û–î–ó–ò –ò –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø
    # =====================================

    EMOJI_POSITIVE: str = Field("üòä", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")
    EMOJI_NEGATIVE: str = Field("üòî", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")
    EMOJI_NEUTRAL: str = Field("üòê", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")
    EMOJI_UNKNOWN: str = Field("ü§î", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")
    EMOJI_HIGH_PRIORITY: str = Field("üî•", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")
    EMOJI_NORMAL_PRIORITY: str = Field("üì∞", description="–≠–º–æ–¥–∑–∏ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π")

    # =====================================
    # üè∑Ô∏è –ö–ê–¢–ï–ì–û–†–ò–ò –ò –•–ï–®–¢–ï–ì–ò
    # =====================================

    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Ö–µ—à—Ç–µ–≥–∏ (—Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫)
    HIGH_PRIORITY_HASHTAGS: List[str] = Field(
        default_factory=lambda: [
            "–ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è",
            "–ø–æ–ª–∏—Ç–∏–∫–∞",
            "—ç–∫–æ–Ω–æ–º–∏–∫–∞",
            "—á—Ä–µ–∑–≤—ã—á–∞–π–Ω–∞—è_—Å–∏—Ç—É–∞—Ü–∏—è",
            "–≤–æ–µ–Ω–Ω—ã–µ_–¥–µ–π—Å—Ç–≤–∏—è",
        ],
        description="–°–ø–∏—Å–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö —Ö–µ—à—Ç–µ–≥–æ–≤ –¥–ª—è –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π",
    )

    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ö–µ—à—Ç–µ–≥–æ–≤ (—Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫)
    HASHTAG_CATEGORIES: List[str] = Field(
        default_factory=lambda: [
            "–ø–æ–ª–∏—Ç–∏–∫–∞",
            "—ç–∫–æ–Ω–æ–º–∏–∫–∞",
            "–ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è",
            "—Å–ø–æ—Ä—Ç",
            "–Ω–∞—É–∫–∞_–∏_—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
            "–∫—É–ª—å—Ç—É—Ä–∞",
            "–æ–±—â–µ—Å—Ç–≤–æ",
            "–¥—Ä—É–≥–∏–µ_—Å—Ç—Ä–∞–Ω—ã",
            "–º–µ–¥–∏—Ü–∏–Ω–∞",
            "–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
            "—ç–∫–æ–ª–æ–≥–∏—è",
            "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
        ],
        description="–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ö–µ—à—Ç–µ–≥–æ–≤",
    )

    # =====================================
    # ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò PYDANTIC
    # =====================================

    model_config = SettingsConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        extra="ignore",
        case_sensitive=False,
    )

    # =====================================
    # üîç –í–ê–õ–ò–î–ê–¢–û–†–´
    # =====================================

    @field_validator("DB_ENGINE")
    @classmethod
    def _lower_db_engine(cls, v):
        return v.lower() if isinstance(v, str) else v

    @field_validator("TELEGRAM_PHONE")
    @classmethod
    def _validate_phone(cls, v):
        if v and not v.startswith("+"):
            return f"+{v}"
        return v

    # =====================================
    # üéØ –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –°–í–û–ô–°–¢–í–ê
    # =====================================

    @property
    def channel_ids(self) -> List[str]:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ID –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞."""
        return [c.strip() for c in self.TELEGRAM_CHANNEL_IDS.split(",") if c.strip()]

    @property
    def sentiment_emoji_map(self) -> Dict[str, str]:
        """–ú–∞–ø–ø–∏–Ω–≥ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —ç–º–æ–¥–∑–∏."""
        return {
            "–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è": self.EMOJI_POSITIVE,
            "–ù–µ–≥–∞—Ç–∏–≤–Ω–∞—è": self.EMOJI_NEGATIVE,
            "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è": self.EMOJI_NEUTRAL,
        }

    @property
    def sentiment_filter_map(self) -> Dict[str, str]:
        """–ú–∞–ø–ø–∏–Ω–≥ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏."""
        return {
            "positive": "–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è",
            "negative": "–ù–µ–≥–∞—Ç–∏–≤–Ω–∞—è",
            "neutral": "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è",
        }


@lru_cache
def get_settings() -> Settings:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)."""
    return Settings()


# –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
settings = get_settings()


# =====================================
# üìã –°–ü–†–ê–í–ö–ê –ü–û –ù–ê–°–¢–†–û–ô–ö–ê–ú
# =====================================


def print_settings_help():
    """–í—ã–≤–æ–¥–∏—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º."""
    print("üîß –°–ø—Ä–∞–≤–∫–∞ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ –Ω–æ–≤–æ—Å—Ç–µ–π")
    print("=" * 60)
    print()

    categories = [
        (
            "üì± TELEGRAM API",
            [
                "TELEGRAM_API_ID",
                "TELEGRAM_API_HASH",
                "TELEGRAM_PHONE",
                "TELEGRAM_BOT_TOKEN",
            ],
        ),
        (
            "üì∫ –ú–û–ù–ò–¢–û–†–ò–ù–ì",
            ["TELEGRAM_CHANNEL_IDS", "CHECK_INTERVAL_SECONDS", "ERROR_RETRY_SECONDS"],
        ),
        ("ü§ñ LLM", ["OLLAMA_BASE_URL", "OLLAMA_MODEL", "MAX_TEXT_LENGTH_FOR_ANALYSIS"]),
        (
            "üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•",
            ["POSTGRES_DSN", "POSTGRES_POOL_MIN_SIZE", "POSTGRES_POOL_MAX_SIZE"],
        ),
        (
            "‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨",
            [
                "MAX_CONCURRENT_REQUESTS",
                "DEFAULT_CACHE_SIZE",
                "DEFAULT_CACHE_TTL_SECONDS",
            ],
        ),
    ]

    for category_name, fields in categories:
        print(f"{category_name}:")
        for field_name in fields:
            field = Settings.model_fields.get(field_name)
            if field and field.description:
                print(f"  {field_name}: {field.description}")
        print()


if __name__ == "__main__":
    print_settings_help()
